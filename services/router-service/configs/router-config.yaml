service:
  name: router-service
  env: dev

upstreams:
  backend_a:
    name: backend-a
    base_url: "http://backend-a.inference-backend.svc.cluster.local:8000"
  backend_b:
    name: backend-b
    base_url: "http://backend-b.inference-backend.svc.cluster.local:8000"

timeouts:
  connect_ms: 1000
  request_ms: 60000

retries:
  max_attempts: 1
  retry_on_status: [502, 503, 504]

affinity:
  enabled: true
  header_session_id: "x-session-id"
  ttl_seconds: 1800

redis:
  enabled: true
  url: "redis://redis.router.svc.cluster.local:6379/0"
  key_prefix_affinity: "affinity:"
  key_prefix_circuit: "circuit:"
  circuit_open_ttl_seconds: 30

routing_rules:
  path: "/etc/router/routing-rules.yaml"

observability:
  metrics_enabled: true
  log_json: true
